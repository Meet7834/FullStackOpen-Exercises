{"ast":null,"code":"import _objectSpread from\"D:/Study/React/Full Stack Open/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/Study/React/Full Stack Open/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import Content from'./components/Content';import Filter from'./components/Filter';import Notification from'./components/Notification';import PersonForm from'./components/PersonForm';import personService from'./services/persons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),allPersons=_useState4[0],setAllPersons=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newName=_useState6[0],setNewName=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),newNumber=_useState8[0],setNewNumber=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),newFilter=_useState10[0],setNewFilter=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),message=_useState12[0],setMessage=_useState12[1];useEffect(function(){personService.getAll().then(function(initialPersons){setAllPersons(initialPersons);});},[]);var addPerson=function addPerson(event){event.preventDefault();var person=allPersons.filter(function(person){return person.name===newName;});var personToAdd=person[0];var updatedPerson=_objectSpread(_objectSpread({},personToAdd),{},{number:newNumber});if(person.length!==0){if(window.confirm(\"\".concat(personToAdd.name,\" is already added to the phonebook, replace the old number with a new one ?\"))){personService.update(updatedPerson.id,updatedPerson).then(function(returnedPerson){console.log(\"\".concat(returnedPerson.name,\" successfully updated\"));setAllPersons(allPersons.map(function(personItem){return personItem.id!==personToAdd.id?personItem:returnedPerson;}));setNewName('');setNewNumber('');setMessage(\"\".concat(updatedPerson.name,\" was successfully updated\"));setTimeout(function(){setMessage(null);},5000);}).catch(function(error){console.log(error);setAllPersons(allPersons.filter(function(person){return person.id!==updatedPerson.id;}));setNewName('');setNewNumber('');setMessage(\"[ERROR] \".concat(updatedPerson.name,\" was already deleted from server\"));setTimeout(function(){setMessage(null);},5000);});}}else{var _personToAdd={name:newName,number:newNumber};personService.create(_personToAdd).then(function(returnedPerson){setAllPersons(allPersons.concat(returnedPerson));setNewName('');setNewNumber('');setMessage(\"\".concat(newName,\" was successfully added\"));setTimeout(function(){setMessage(null);},5000);}).catch(function(error){setMessage(\"[ERROR] \".concat(error.response.data.error));setTimeout(function(){setMessage(null);},5000);console.log(error.response.data);});}};var deletePerson=function deletePerson(id){var filteredPerson=allPersons.filter(function(person){return person.id===id;});var personName=filteredPerson[0].name;var personId=filteredPerson[0].id;if(window.confirm(\"Delete \".concat(personName,\" ?\"))){personService.remove(personId);console.log(\"\".concat(personName,\" successfully deleted\"));setMessage(\"\".concat(personName,\" was successfully deleted\"));setAllPersons(allPersons.filter(function(person){return person.id!==personId;}));setTimeout(function(){setMessage(null);},5000);}};var handleNameChange=function handleNameChange(event){setNewName(event.target.value);};var handleNumberChange=function handleNumberChange(event){setNewNumber(event.target.value);};var handleFilterChange=function handleFilterChange(event){setNewFilter(event.target.value);var regex=new RegExp(newFilter,'i');var filteredPersons=function filteredPersons(){return allPersons.filter(function(person){return person.name.match(regex);});};setPersons(filteredPersons);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{message:message}),/*#__PURE__*/_jsx(Filter,{value:newFilter,onChange:handleFilterChange}),/*#__PURE__*/_jsx(\"h2\",{children:\"Add new person\"}),/*#__PURE__*/_jsx(PersonForm,{onSubmit:addPerson,newName:newName,handleNameChange:handleNameChange,newNumber:newNumber,handleNumberChange:handleNumberChange}),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(Content,{persons:persons,allPersons:allPersons,deletePerson:deletePerson})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","Content","Filter","Notification","PersonForm","personService","App","persons","setPersons","allPersons","setAllPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","message","setMessage","getAll","then","initialPersons","addPerson","event","preventDefault","person","filter","name","personToAdd","updatedPerson","number","length","window","confirm","update","id","returnedPerson","console","log","map","personItem","setTimeout","catch","error","create","concat","response","data","deletePerson","filteredPerson","personName","personId","remove","handleNameChange","target","value","handleNumberChange","handleFilterChange","regex","RegExp","filteredPersons","match"],"sources":["D:/Study/React/Full Stack Open/exercises/Part3/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport Content from './components/Content'\r\nimport Filter from './components/Filter'\r\nimport Notification from './components/Notification'\r\nimport PersonForm from './components/PersonForm'\r\nimport personService from './services/persons'\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([])\r\n  const [ allPersons, setAllPersons] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [newFilter, setNewFilter] = useState('')\r\n  const [message, setMessage] = useState(null)\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then(initialPersons => {\r\n      setAllPersons(initialPersons)\r\n    })\r\n  }, [])\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    const person = allPersons.filter((person) =>\r\n        person.name === newName\r\n    )\r\n\r\n    const personToAdd = person[0]\r\n    const updatedPerson = { ...personToAdd, number: newNumber }\r\n\r\n    if (person.length !== 0) {\r\n      if (window.confirm(`${personToAdd.name} is already added to the phonebook, replace the old number with a new one ?`)) {\r\n        personService\r\n          .update(updatedPerson.id, updatedPerson).then(returnedPerson => {\r\n            console.log(`${returnedPerson.name} successfully updated`)\r\n            setAllPersons(allPersons.map(personItem => personItem.id !== personToAdd.id ? personItem : returnedPerson))\r\n            setNewName('')\r\n            setNewNumber('')\r\n            setMessage(\r\n              `${updatedPerson.name} was successfully updated`\r\n            )\r\n            setTimeout(() => {\r\n              setMessage(null)\r\n            }, 5000)\r\n          })\r\n          .catch((error) => {\r\n            console.log(error)\r\n            setAllPersons(allPersons.filter(person => person.id !== updatedPerson.id))\r\n            setNewName('')\r\n            setNewNumber('')\r\n            setMessage(\r\n              `[ERROR] ${updatedPerson.name} was already deleted from server`\r\n            )\r\n            setTimeout(() => {\r\n              setMessage(null)\r\n            }, 5000)\r\n          })\r\n      }\r\n    } else {\r\n        const personToAdd = {\r\n            name: newName,\r\n            number: newNumber\r\n          }\r\n          personService\r\n            .create(personToAdd)\r\n            .then(returnedPerson => {\r\n              setAllPersons(allPersons.concat(returnedPerson))\r\n              setNewName('')\r\n              setNewNumber('')\r\n              setMessage(\r\n                `${newName} was successfully added`\r\n              )\r\n              setTimeout(() => {\r\n                setMessage(null)\r\n              }, 5000)\r\n            })\r\n            .catch(error => {\r\n              setMessage(\r\n                `[ERROR] ${error.response.data.error}`\r\n              )\r\n              setTimeout(() => {\r\n                setMessage(null)\r\n              }, 5000)\r\n              console.log(error.response.data)\r\n            })\r\n    }\r\n  }\r\n\r\n  const deletePerson = (id) => {\r\n    const filteredPerson = allPersons.filter(person => person.id === id)\r\n    const personName = filteredPerson[0].name\r\n    const personId = filteredPerson[0].id\r\n    if (window.confirm(`Delete ${personName} ?`)) {\r\n      personService\r\n        .remove(personId)\r\n      console.log(`${personName} successfully deleted`)\r\n      setMessage(\r\n        `${personName} was successfully deleted`\r\n      )\r\n      setAllPersons(allPersons.filter(person => person.id !== personId))\r\n      setTimeout(() => {\r\n        setMessage(null)\r\n      }, 5000)\r\n    }\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilterChange = (event) => {\r\n    setNewFilter(event.target.value)\r\n    const regex = new RegExp( newFilter, 'i' );\r\n    const filteredPersons = () => allPersons.filter(person => person.name.match(regex))\r\n    setPersons(filteredPersons)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={message} />\r\n      <Filter value={newFilter} onChange={handleFilterChange} />\r\n      <h2>Add new person</h2>\r\n      <PersonForm onSubmit={addPerson} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange} />\r\n      <h2>Numbers</h2>\r\n      <Content persons={persons} allPersons={allPersons} deletePerson={deletePerson} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}